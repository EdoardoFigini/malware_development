#include <stdio.h>
#include <windows.h>

int main(int argc, char** argv){
    DWORD pid;
    HANDLE hProcess;

    if(argc < 2){
        fprintf(stderr, "[!] Insufficient number of arguments");
        return EXIT_FAILURE;
    }
    
    pid = atoi(argv[1]);
    hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, pid);

    if(hProcess == NULL){
        fprintf(stderr, "[!] Failed to get handle to process %ld, Error: %ld", pid, GetLastError());
        return EXIT_FAILURE;
    }

    printf("[+] Got handle to process %ld", pid);

    return 0;
}